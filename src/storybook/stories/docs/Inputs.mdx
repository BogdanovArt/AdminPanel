# Элементы формы и органы управления

#

#

## Блок формы

#### Группа полей ввода

- тип `group`

| поле         | тип                            | [unique](#уникальные-значения-параметров) | required | назначение                                                        |
| ------------ | ------------------------------ | ----------------------------------------- | -------- | ----------------------------------------------------------------- |
| **type**     | string                         | false                                     | true     | тип поля ввода                                                    |
| **id**       | number                         | true                                      | true     | идентификатор сущности блока                                      |
| **title**    | string                         | false                                     | false    | наименование блока                                                |
| **items**    | [Инпут](#поля-ввода)[]         | false                                     | false    | массив сущностей полей ввода                                      |
| **controls** | [Кнопка](#кнопка-управления)[] | false                                     | false    | массив сущностей кнопки управления (выводится в заголовке группы) |

## Поля ввода

Массив элементов полей ввода может содержать следующие типы элементов:

#### Текстовое поле

- тип `text` / `number`

| поле                  | тип                            | [unique](#уникальные-значения-параметров) | required | назначение                                                                                                                                                                               |
| --------------------- | ------------------------------ | ----------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **type**              | string                         | false                                     | true     | тип поля ввода                                                                                                                                                                           |
| **name**              | string                         | true                                      | true     | значение ключа payload'a для запроса сохранения формы                                                                                                                                    |
| **label**             | string                         | false                                     | false    | содержимое лейбла поля                                                                                                                                                                   |
| **rules**             | string                         | false                                     | false    | nullable\|numeric или nullable\|integer - инструкции для ограничения вводимых значений [strict\*](#strict)                                                                               |
| **allowedCharacters** | string                         | false                                     | false    | regex для ограничения вводимых значений [strict\*](#strict)                                                                                                                              |
| **value**             | string                         | false                                     | false    | значение поля по-умолчанию (заполненное значение инпута)                                                                                                                                 |
| **mask**              | [Валидация](#валидация)        | false                                     | false    | `mask.value` - значение маски см. модуль [v-mask](https://www.npmjs.com/package/v-mask) [strict\*](#strict)                                                                              |
| **prefix**            | string                         | false                                     | false    | "нулевое" значение инпута - в связке с корректной маской позволяет добавлять "неудаляемый" префикс (напр. [+7 (]() при вводе телефона). Возвращаемое значение не будет содержать префикс |
| **max**               | [Валидация](#валидация)        | false                                     | false    | `max.value` - integer для максимальной длины значения [limited\*](#limited)                                                                                                              |
| **min**               | [Валидация](#валидация)        | false                                     | false    | `min.value` - integer для минимальной длины значения [limited\*](#limited)                                                                                                               |
| **regex**             | [Валидация](#валидация)        | false                                     | false    | `regex.value` - regex для проверки значения [limited\*](#limited)                                                                                                                        |
| **disabled**          | boolean                        | false                                     | false    | состояние возможности редактирования значения поля                                                                                                                                       |
| **controls**          | [Кнопка](#кнопка-управления)[] | false                                     | false    | массив сущностей кнопки управления (выводится справа от поля ввода)                                                                                                                      |

#### Валидация

| поле             | тип    | [unique](#уникальные-значения-параметров) | required | назначение                         |
| ---------------- | ------ | ----------------------------------------- | -------- | ---------------------------------- |
| **value**        | string | false                                     | true     | значения для выполнения валидации  |
| **errorMessage** | string | false                                     | true     | текст ошибки при провале валидации |

#### Кнопка управления

- `Кнопка` основной орган управления

| поле        | тип                                 | [unique](#уникальные-значения-параметров) | required | назначение                                                                   |
| ----------- | ----------------------------------- | ----------------------------------------- | -------- | ---------------------------------------------------------------------------- |
| **type**    | string                              | false                                     | true     | тип элемента управления                                                      |
| **dark**    | boolean                             | false                                     | false    | вид отображения текста кнопки (true - текст светлый, в ином случае - темный) |
| **icon**    | string                              | false                                     | false    | наименование [иконки](#иконки) эл-та управления                              |
| **title**   | string                              | false                                     | false    | текст кнопки                                                                 |
| **tooltip** | string                              | false                                     | false    | текст всплывающей подсказки                                                  |
| **action**  | [Действие](#универсальное-действие) | false                                     | false    | действие кнопки                                                              |

### Чекбокс

- тип `checkbox`

| поле         | тип     | [unique](#уникальные-значения-параметров) | required | назначение                                               |
| ------------ | ------- | ----------------------------------------- | -------- | -------------------------------------------------------- |
| **type**     | string  | false                                     | true     | тип поля ввода                                           |
| **name**     | string  | true                                      | true     | значение ключа payload'a для запроса сохранения формы    |
| **label**    | string  | false                                     | false    | содержимое лейбла поля                                   |
| **checked**  | boolean | false                                     | false    | значение поля по-умолчанию (заполненное значение инпута) |
| **disabled** | boolean | false                                     | false    | состояние возможности редактирования значения поля       |

### Радио

- тип `radio`

| поле         | тип                         | [unique](#уникальные-значения-параметров) | required | назначение                                            |
| ------------ | --------------------------- | ----------------------------------------- | -------- | ----------------------------------------------------- |
| **type**     | string                      | false                                     | true     | тип поля ввода                                        |
| **name**     | string                      | true                                      | true     | значение ключа payload'a для запроса сохранения формы |
| **label**    | string                      | false                                     | false    | содержимое лейбла поля                                |
| **value**    | string                      | false                                     | true     | значение поля по-умолчанию                            |
| **disabled** | boolean                     | false                                     | false    | состояние возможности редактирования значения поля    |
| **items**    | [Элемент](#элемент-радио)[] | false                                     | true     | возможные варианты выбора для поля                    |

#### Элемент радио

- `radio-item` сущность элемента выбора радио

| поле      | тип    | [unique](#уникальные-значения-параметров) | required | назначение                                 |
| --------- | ------ | ----------------------------------------- | -------- | ------------------------------------------ |
| **value** | string | true                                      | true     | значение, передаваемое при выборе варианта |
| **label** | string | false                                     | true     | отображаемое имя варианта                  |

### Загрузчик изображений

При перетаскивании или ручной загрузке изображения выполняется запрос на image.endpoint (по-умолчанию `/api/admin/v1/files/image`) ответ на который содержит данные загруженного [Изображения](#базовое-изображение)[].

Имеется возможность управлять порядком отображения изображений путем их перетаскивания в рамках текущего поля ввода (изменяется порядок элементов массива идентификаторов изображений в payload'e сохранения формы)

- тип `image-upload`

| поле          | тип                                   | [unique](#уникальные-значения-параметров) | required | назначение                                                                  |
| ------------- | ------------------------------------- | ----------------------------------------- | -------- | --------------------------------------------------------------------------- |
| **type**      | string                                | false                                     | true     | тип поля ввода                                                              |
| **name**      | string                                | true                                      | true     | значение ключа payload'a для запроса сохранения формы                       |
| **endpoint**  | string                                | false                                     | true     | адрес эндпоинта для отправки запросов загрузки / удаления изображений       |
| **label**     | string                                | false                                     | false    | содержимое лейбла поля                                                      |
| **items**     | [Изображение](#базовое-изображение)[] | false                                     | false    | массив сущностей [Изображение](#базовое-изображение)                        |
| **maxCount**  | number                                | false                                     | false    | максимальное кол-во изображений для загрузки                                |
| **minSize**   | float                                 | false                                     | false    | минимальный размер изображения в мегабайтах (дробные значения для килобайт) |
| **maxSize**   | float                                 | false                                     | true     | максимальный размер изображения в мегабайтах                                |
| **maxWidth**  | number                                | false                                     | true     | макс. ширина изображения в пикселах                                         |
| **maxHeight** | number                                | false                                     | true     | макс. высота изображения в пикселах                                         |
| **minWidth**  | number                                | false                                     | true     | мин. ширина изображения в пикселах                                          |
| **minHeight** | number                                | false                                     | true     | мин. высота изображения в пикселах                                          |
| **formats**   | string[]                              | false                                     | true     | массив допустимых форматов изображения вида "image/png", "image/jpg" и т.д. |

#### Базовое изображение

- `Изображение` сущность загруженных изображений

| поле       | тип                                 | [unique](#уникальные-значения-параметров) | required | назначение                        |
| ---------- | ----------------------------------- | ----------------------------------------- | -------- | --------------------------------- |
| **type**   | string                              | false                                     | true     | тип поля ввода                    |
| **id**     | int                                 | true                                      | true     | идентификатор изображения         |
| **url**    | string                              | true                                      | true     | ссылка на изображение             |
| **action** | [Действие](#универсальное-действие) | false                                     | false    | действие для удаления изображения |

### Выпадающий список

- тип `dropdown`

| поле               | тип                                      | [unique](#уникальные-значения-параметров) | required | назначение                                                             |
| ------------------ | ---------------------------------------- | ----------------------------------------- | -------- | ---------------------------------------------------------------------- |
| **type**           | string                                   | false                                     | true     | тип поля ввода                                                         |
| **name**           | string                                   | true                                      | true     | значение ключа payload'a для запроса сохранения формы                  |
| **label**          | string                                   | false                                     | false    | содержимое лейбла поля                                                 |
| **placeholder**    | string                                   | false                                     | false    | текст подсказки внутри поля ввода                                      |
| **endpoint**       | string                                   | false                                     | false    | адрес для динамических запросов (добавление, дозагрузка, поиск и т.д.) |
| **enableAddition** | boolean                                  | false                                     | false    | возможность добавления элемента выпадающего списка                     |
| **selectMultiple** | boolean                                  | false                                     | false    | возможность выбирать несколько эл-в списка                             |
| **listItems**      | [Элемент](#элемент-выпадающего-списка)[] | false                                     | false    | массив элементов списка                                                |
| **listSelected**   | [Элемент](#элемент-выпадающего-списка)[] | false                                     | false    | массив выбранных элементов (значение поля по-умолчанию)                |

### Элемент выпадающего списка

| поле      | тип          | [unique](#уникальные-значения-параметров) | required | назначение             |
| --------- | ------------ | ----------------------------------------- | -------- | ---------------------- |
| **id**    | number (int) | true                                      | true     | идентификатор значения |
| **title** | string       | false                                     | true     | наименование значения  |

#### strict

Ввод значений, отличных от референсных недопускается (при попытке ввести символ / вставить скопированное значение - действие игнорируется)

#### limited

Ввод значений, отличных от референсных допускается, после окончания ввода (blur event-а) выводится ошибка, соответствующее поле в payload-е формы аннулируется
